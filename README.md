# Домашнее задание 26_2

## !!!ВНИМАНИЕ!!! ##
### Инструкция перед запуском проекта (порядок выполнения имеет значение)
1. Перед запуском проекта переименуйте файл [env_template](env_template) в `.env` и поменяйте содержимое на свои переменные окруженния
2. Выполните миграцию `python manage.py migrate`
3. Создайте суперпользователя (имеет все права) `python manage.py create_custom_superuser`

    _Логин: admin@example.com Пароль: 0987_

4. Создайте модератора: `python manage.py create_moderator_user`

    _Логин: moderator@example.com Пароль: qweasd_

5. Создайте простого пользователя: `python manage.py create_simple_user`

    _Логин: test@example.com Пароль: 0987_

6. Заполните базу даных (курсы и уроки): `python manage.py fill_materials_data `
7. Заполните базу даных (платежи): `python manage.py fill_payment_data`

# Задание 1
Настройте проект для работы с Celery. 
Также настройте приложение на работу с celery-beat для выполнения периодических задач.

_Не забудьте вынести настройки Redis в переменные окружения._

# Задание 2
Ранее вы реализовали функционал подписки на обновление курсов. 
Теперь добавьте асинхронную рассылку писем пользователям об обновлении материалов курса.

# Задание 3
С помощью celery-beat реализуйте фоновую задачу, 
которая будет проверять пользователей по дате последнего входа по полю `last_login` и, 
если пользователь не заходил более месяца, блокировать его с помощью флага `is_active`.

Задачу сделайте периодической и запланируйте расписание в настройках celery-beat.

_Обратите внимание на timezone вашего приложения и timezone в настройках celery:_ 
_важно, чтобы они были одинаковыми, чтобы задачи запускались в корректное время._

# Дополнительное задание
Пользователь может обновлять каждый урок курса отдельно. Добавьте проверку на то, 
что уведомление отправляется только в том случае, если курс не обновлялся более четырех часов.